"use strict";var I=Object.defineProperty;var Se=Object.getOwnPropertyDescriptor;var Fe=Object.getOwnPropertyNames;var ve=Object.prototype.hasOwnProperty;var Te=(a,e)=>{for(var t in e)I(a,t,{get:e[t],enumerable:!0})},Be=(a,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Fe(e))!ve.call(a,r)&&r!==t&&I(a,r,{get:()=>e[r],enumerable:!(s=Se(e,r))||s.enumerable});return a};var je=a=>Be(I({},"__esModule",{value:!0}),a);var De={};Te(De,{default:()=>Ie});module.exports=je(De);var be=require("@raycast/api");function Ae(a){return a instanceof Error&&"response"in a&&"data"in a.response}function Pe(a){return a.response.data?.error_description||a.message}function ie(a,e){throw Ae(a)?new Error(`${e}: "${Pe(a)}"`):new Error(String(a))}function Ce(a){try{return new URL(a),!0}catch{return!1}}function ne(a,e){let t=/!\[[^\]]*\]\(([^)]+)\)(?:\[([^\]]*)\])?(?:\{[^}]*\})?/g;return("description"in a?a.description:a.text).replace(t,(r,o,d)=>{let m=o.replace(/\{[^}]*\}/g,"").split("/").pop(),y=a.attachments?.find(h=>h.name===m);if(!y)return r;let g=`![${y.name}](${e}${y.url})`;return d?`${g}[${d}]`:g})}function k(a){let e=new Date(a);return new Intl.DateTimeFormat("en-US",{dateStyle:"long",timeStyle:"medium"}).format(e)}function Ue(a){return/\d/.test(a)?/^\s*(?:\d+\s*w)?(?:\s*\d+\s*d)?(?:\s*\d+\s*h)?(?:\s*\d+\s*m)?\s*$/.test(a):!1}function ae(a){return Ue(a)}function re(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a=="object"&&a!==null){if("name"in a&&"color"in a)return a;if("name"in a)return{id:"id"in a?String(a.id):"",name:String(a.name||""),color:null}}return""}function $(a,e){return Ce(a)?a:`${e}${a}`}var de=require("@raycast/api");var xe=a=>a!==null&&typeof a=="object",ce=(a,e)=>{let t=a,s=e;return t.endsWith("/")&&(t=t.slice(0,-1)),s.startsWith("/")&&(s=s.slice(1)),`${t}/${s}`},Ee=a=>a instanceof FormData?a:typeof a=="object"?JSON.stringify(a):a;var ue=(a=[])=>{let e=a.map(t=>xe(t)?Object.keys(t).map(s=>`${s}(${ue(t[s])})`).join(","):encodeURIComponent(t));return e.length?e.join(","):""},n=(a=[])=>{let e=typeof a=="string"?a:ue(a);return e?`fields=${e}`:""},oe=(a,e)=>Array.isArray(e)?e.map(t=>`${encodeURIComponent(a)}=${encodeURIComponent(t)}`):e!==void 0?`${encodeURIComponent(a)}=${encodeURIComponent(e)}`:"";var c=(...a)=>a.reduce((e,t)=>(e[t]=s=>oe(t,s),e),{});var i=class{constructor(e,t,s={}){Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_args",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.keys(s).forEach(r=>{if(r in t){let o=t[r],d=typeof o!="function"?oe(r,s[r]):o(s[r]);d&&this._args.push(...Array.isArray(d)?d:[d])}})}build(e){let t=this._args.join("&");return{...e,url:t?`${this.baseUrl}?${t}`:this.baseUrl}}get(){return this.build()}post(e){return this.build({method:"POST",data:e})}postFile(e){return this.build({method:"POST",data:e,headers:{"Content-Type":"multipart/form-data"}})}delete(){return this.build({method:"DELETE"})}put(){return this.build({method:"PUT"})}patch(){return this.build({method:"PATCH"})}},u=class{constructor(e){Object.defineProperty(this,"youtrack",{enumerable:!0,configurable:!0,writable:!0,value:e})}},S=class extends u{async getActivities(e){return this.youtrack.fetch(new i("api/activities",{fields:n,...c("$skip","$top","reverse","categories","author","start","end","issueQuery")},e).get())}async getActivityById(e,t){return this.youtrack.fetch(new i(`api/activities/${e}`,{fields:n},t).get())}async getActivitiesPage(e){return this.youtrack.fetch(new i("api/activitiesPage",{fields:n,...c("categories","reverse","author","start","end","issueQuery","cursor","activityId")},e).get())}},F=class extends u{async getAgiles(e){return this.youtrack.fetch(new i("api/agiles",{fields:n,$skip:"number",$top:"number"},e).get())}async createAgile(e,t){return this.youtrack.fetch(new i("api/agiles",{fields:n,template:"string"},t).post(e))}async getAgileById(e,t){return this.youtrack.fetch(new i(`api/agiles/${e}`,{fields:n},t).get())}async updateAgile(e,t,s){return this.youtrack.fetch(new i(`api/agiles/${e}`,{fields:n},s).post(t))}async deleteAgile(e,t){return this.youtrack.fetch(new i(`api/agiles/${e}`,{fields:n},t).delete())}async getAgileSprints(e,t){return this.youtrack.fetch(new i(`api/agiles/${e}/sprints`,{fields:n,$skip:"number",$top:"number"},t).get())}async createAgileSprint(e,t,s){return this.youtrack.fetch(new i(`api/agiles/${e}/sprints`,{fields:n,muteUpdateNotifications:"boolean"},s).post(t))}async getAgileSprintById(e,t,s){return this.youtrack.fetch(new i(`api/agiles/${e}/sprints/${t}`,{fields:n},s).get())}async deleteAgileSprint(e,t,s){return this.youtrack.fetch(new i(`api/agiles/${e}/sprints/${t}`,{fields:n},s).delete())}async updateAgileSprint(e,t,s,r){return this.youtrack.fetch(new i(`api/agiles/${e}/sprints/${t}`,{fields:n},r).post(s))}},v=class extends u{async getArticles(e){return this.youtrack.fetch(new i("api/articles",{fields:n,...c("$top","$skip")},e).get())}async createArticle(e,t){return this.youtrack.fetch(new i("api/articles",{fields:n,...c("muteUpdateNotifications","draftId")},t).post(e))}async getArticle(e,t){return this.youtrack.fetch(new i(`api/articles/${e}`,{fields:n},t).get())}async updateArticle(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}`,{fields:n,muteUpdateNotifications:"string"},s).post(t))}async deleteArticle(e,t){return this.youtrack.fetch(new i(`api/articles/${e}`,{fields:n},t).delete())}async getArticleAttachments(e,t){return this.youtrack.fetch(new i(`api/articles/${e}/attachments`,{fields:n,...c("$top","$skip")},t).get())}async createArticleAttachment(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/attachments`,{fields:n,muteUpdateNotifications:"string"},s).postFile(t))}async getArticleAttachment(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/attachments/${t}`,{fields:n},s).get())}async updateArticleAttachment(e,t,s,r){return this.youtrack.fetch(new i(`api/articles/${e}/attachments/${t}`,{fields:n},r).post(s))}async deleteArticleAttachment(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/attachments/${t}`,{fields:n},s).delete())}async getChildArticles(e,t){return this.youtrack.fetch(new i(`api/articles/${e}/childArticles`,{fields:n,...c("$top","$skip")},t).get())}async addChildArticle(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/childArticles`,{fields:n,...c("muteUpdateNotifications")},s).post(t))}async getChildArticle(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/childArticles/${t}`,{fields:n},s).get())}async updateChildArticle(e,t,s,r){return this.youtrack.fetch(new i(`api/articles/${e}/childArticles/${t}`,{fields:n,muteUpdateNotifications:"boolean"},r).post(s))}async removeChildArticleLink(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/childArticles/${t}`,{fields:n},s).delete())}async getArticleComments(e,t){return this.youtrack.fetch(new i(`api/articles/${e}/comments`,{fields:n,...c("$top","$skip")},t).get())}async createArticleComment(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/comments`,{fields:n,...c("draftId","muteUpdateNotifications")},s).post(t))}async getArticleComment(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/comments/${t}`,{fields:n},s).get())}async updateArticleComment(e,t,s,r){return this.youtrack.fetch(new i(`api/articles/${e}/comments/${t}`,{fields:n,muteUpdateNotifications:"boolean"},r).post(s))}async deleteArticleComment(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/comments/${t}`,{fields:n},s).delete())}async getArticleCommentReactions(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/comments/${t}/reactions`,{fields:n,...c("$top","$skip")},s).get())}async createCommentReaction(e,t,s,r){return this.youtrack.fetch(new i(`api/articles/${e}/comments/${t}/reactions`,{fields:n},r).post(s))}async getCommnetReaction(e,t,s,r){return this.youtrack.fetch(new i(`api/articles/${e}/comments/${t}/reactions/${s}`,{fields:n},r).get())}async removeCommnetReaction(e,t,s,r){return this.youtrack.fetch(new i(`api/articles/${e}/comments/${t}/reactions/${s}`,{fields:n},r).delete())}async getParentArticle(e,t){return this.youtrack.fetch(new i(`api/articles/${e}/parentArticle`,{fields:n},t).get())}async getArticleTags(e,t){return this.youtrack.fetch(new i(`api/articles/${e}/tags`,{fields:n,...c("$top","$skip")},t).get())}async createArticleTag(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/tags`,{fields:n},s).post(t))}async getArticleTag(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/tags/${t}`,{fields:n},s).get())}async removeArticleTag(e,t,s){return this.youtrack.fetch(new i(`api/articles/${e}/tags/${t}`,{fields:n},s).delete())}},T=class extends u{async applyCommandToIssues(e,t){return this.youtrack.fetch(new i("api/commands",{fields:n,muteUpdateNotifications:"string"},t).post(e))}async getCommandSuggestions(e,t){return this.youtrack.fetch(new i("api/commands/assist",{fields:n},t).post(e))}},B=class extends u{async getUserGroups(e){return this.youtrack.fetch(new i("api/groups",{fields:n,...c("$top","$skip")},e).get())}async getUserGroupById(e,t){return this.youtrack.fetch(new i(`api/groups/${e}`,{fields:n},t).get())}},j=class extends u{async getIssueLinkTypes(e){return this.youtrack.fetch(new i("api/issueLinkTypes",{fields:n,...c("$top","$skip")},e).get())}async createIssueLinkType(e,t){return this.youtrack.fetch(new i("api/issueLinkTypes",{fields:n},t).post(e))}async getIssueLinkType(e,t){return this.youtrack.fetch(new i(`api/issueLinkTypes/${e}`,{fields:n},t).get())}async updateIssueLinkType(e,t,s){return this.youtrack.fetch(new i(`api/issueLinkTypes/${e}`,{fields:n},s).post(t))}async deleteIssueLinkType(e,t){return this.youtrack.fetch(new i(`api/issueLinkTypes/${e}`,{fields:n},t).delete())}},A=class extends u{async getIssues(e){return this.youtrack.fetch(new i("api/issues",{fields:n,...c("$top","$skip","query","customFields")},e).get())}async createIssue(e,t){return this.youtrack.fetch(new i("api/issues",{fields:n,...c("draftId","muteUpdateNotifications")},t).post(e))}async getIssueById(e,t){return this.youtrack.fetch(new i(`api/issues/${e}`,{fields:n},t).get())}async updateIssue(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}`,{fields:n,muteUpdateNotifications:"boolean"},s).post(t))}async deleteIssue(e,t){return this.youtrack.fetch(new i(`api/issues/${e}`,{fields:n},t).delete())}async getIssueCount(e,t){let s=await this.youtrack.fetch(new i("api/issuesGetter/count",{fields:n}).post(e));return s.count===-1?this.getIssueCount(e,t):s}async getIssueActivities(e,t){return this.youtrack.fetch(new i(`api/issues/${e}/activities`,{fields:n,...c("$top","$skip","categories","reverse","start","end","author")},t).get())}async getIssueActivity(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/activities/${t}`,{fields:n},s).get())}async getActivitiesPage(e,t){return this.youtrack.fetch(new i(`api/issues/${e}/activitiesPage`,{fields:n,...c("categories","reverse","start","end","author","cursor","activityId")},t).get())}async getIssueCustomFields(e,t){return this.youtrack.fetch(new i(`api/issues/${e}/customFields`,{fields:n,...c("$top","$skip")},t).get())}async getIssueCustomFieldById(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/customFields/${t}`,{fields:n},s).get())}async updateIssueCustomField(e,t,s,r){return this.youtrack.fetch(new i(`api/issues/${e}/customFields/${t}`,{fields:n,muteUpdateNotifications:"boolean"},r).post(s))}async getIssueProject(e,t){return this.youtrack.fetch(new i(`api/issues/${e}/project`,{fields:n},t).get())}async changeIssueProject(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/project`,{fields:n,muteUpdateNotifications:"boolean"},s).post(t))}async getIssueSprints(e,t){return this.youtrack.fetch(new i(`api/issues/${e}/sprints`,{fields:n,...c("$skip","$top")},t).get())}},P=class extends u{async getSavedQueries(e){return this.youtrack.fetch(new i("api/savedQueries",{fields:n,...c("$top","$skip")},e).get())}async createSavedQuery(e,t){return this.youtrack.fetch(new i("api/savedQueries",{fields:n},t).post(e))}async getSavedQueryById(e,t){return this.youtrack.fetch(new i(`api/savedQueries/${e}`,{fields:n},t).get())}async updateSavedQuery(e,t,s){return this.youtrack.fetch(new i(`api/savedQueries/${e}`,{fields:n},s).post(t))}async deleteSavedQuery(e,t){return this.youtrack.fetch(new i(`api/savedQueries/${e}`,{fields:n},t).delete())}},C=class extends u{async getSearchSuggestions(e,t){return this.youtrack.fetch(new i("api/search/assist",{fields:n},t).post(e))}},U=class extends u{async getTags(e){return this.youtrack.fetch(new i("api/tags",{fields:n,$skip:"number",$top:"number",query:"string"},e).get())}async getTagById(e,t){return this.youtrack.fetch(new i(`api/tags/${e}`,{fields:n},t).get())}async createTag(e,t){return this.youtrack.fetch(new i("api/tags",{fields:n},t).post(e))}async updateTag(e,t,s){return this.youtrack.fetch(new i(`api/tags/${e}`,{fields:n},s).post(t))}async deleteTag(e,t){return this.youtrack.fetch(new i(`api/tags/${e}`,{fields:n},t).delete())}async getIssuesByTag(e,t){return this.youtrack.fetch(new i(`api/tags/${e}/issues`,{fields:n,...c("$skip","$top","customFields")},t).get())}},x=class extends u{async getUsers(e){return this.youtrack.fetch(new i("api/users",{fields:n,...c("$skip","$top")},e).get())}async getUserProfile(e,t){return this.youtrack.fetch(new i(`api/users/${e}`,{fields:n},t).get())}async getUserGeneralProfile(e,t){return this.youtrack.fetch(new i(`api/users/${e}/profiles/general`,{fields:n},t).get())}async updateUserGeneralProfile(e,t,s){return this.youtrack.fetch(new i(`api/users/${e}/profiles/general`,{fields:n},s).post(t))}async getUserNotificationProfile(e,t){return this.youtrack.fetch(new i(`api/users/${e}/profiles/notifications`,{fields:n},t).get())}async updateUserNotificationProfile(e,t,s){return this.youtrack.fetch(new i(`api/users/${e}/profiles/notifications`,{fields:n},s).post(t))}async getUserTimeTrackingProfile(e,t){return this.youtrack.fetch(new i(`api/users/${e}/profiles/timetracking`,{fields:n},t).get())}async updateUserTimeTrackingProfile(e,t,s){return this.youtrack.fetch(new i(`api/users/${e}/profiles/timetracking`,{fields:n},s).post(t))}async getUserSavedQueries(e,t){return this.youtrack.fetch(new i(`api/users/${e}/savedQueries`,{fields:n,$skip:"number",$top:"number"},t).get())}async getUserTags(e,t){return this.youtrack.fetch(new i(`api/users/${e}/tags`,{fields:n,...c("$skip","$top")},t).get())}async getCurrentUserProfile(e){return this.youtrack.fetch(new i("api/users/me",{fields:n},e).get())}},E=class extends u{async getWorkItems(e){return this.youtrack.fetch(new i("api/workItems",{fields:n,...c("$skip","$top","query","startDate","endDate","author","creator","start","end","createdStart","createdEnd","updatedStart","updatedEnd")},e).get())}async getWorkItem(e,t){return this.youtrack.fetch(new i(`api/workItems/${e}`,{fields:n},t).get())}},O=class extends u{async getIssueComments(e,t){return this.youtrack.fetch(new i(`api/issues/${e}/comments`,{fields:n,...c("$top","$skip")},t).get())}async createIssueComment(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/comments`,{fields:n,...c("draftId","muteUpdateNotifications")},s).post(t))}async getIssueCommentById(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/comments/${t}`,{fields:n},s).get())}async updateIssueComment(e,t,s,r){return this.youtrack.fetch(new i(`api/issues/${e}/comments/${t}`,{fields:n,muteUpdateNotifications:"boolean"},r).post(s))}async deleteIssueComment(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/comments/${t}`,{fields:n},s).delete())}async getIssueCommnetReaction(e,t,s,r){return this.youtrack.fetch(new i(`api/issues/${e}/comments/${t}/reactions/${s}`,{fields:n},r).get())}async deleteIssueCommnetReaction(e,t,s,r){return this.youtrack.fetch(new i(`api/issues/${e}/comments/${t}/reactions/${s}`,{fields:n},r).delete())}},N=class extends u{async getIssueLinks(e,t){return this.youtrack.fetch(new i(`api/issues/${e}/links`,{fields:n,...c("$top","$skip")},t).get())}async getIssueLinkById(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/links/${t}`,{fields:n},s).get())}async getLinkedIssues(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/links/${t}/issues`,{fields:n,...c("$skip","$top")},s).get())}async linkIssue(e,t,s,r){return this.youtrack.fetch(new i(`api/issues/${e}/links/${t}/issues`,{fields:n,muteUpdateNotifications:"boolean"},r).post(s))}async unlinkIssue(e,t,s,r){return this.youtrack.fetch(new i(`api/issues/${e}/links/${t}/issues/${s}`,{fields:n},r).delete())}},W=class extends u{async getIssueTags(e,t){return this.youtrack.fetch(new i(`api/issues/${e}/tags`,{fields:n,...c("$top","$skip")},t).get())}async addTagToIssue(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/tags`,{fields:n},s).post(t))}async getIssueTagById(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/tags/${t}`,{fields:n},s).get())}async deleteIssueTag(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/tags/${t}`,{fields:n},s).delete())}},V=class extends u{async getIssueTimeTracking(e,t){return this.youtrack.fetch(new i(`api/issues/${e}/timeTracking`,{fields:n},t).get())}async getIssueWorkItems(e,t){return this.youtrack.fetch(new i(`api/issues/${e}/timeTracking/workItems`,{fields:n,...c("$top","$skip")},t).get())}async createIssueWorkItem(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/timeTracking/workItems`,{fields:n,muteUpdateNotifications:"boolean"},s).post(t))}async getIssueWorkItemById(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/timeTracking/workItems/${t}`,{fields:n},s).get())}async updateWorkItem(e,t,s,r){return this.youtrack.fetch(new i(`api/issues/${e}/timeTracking/workItems/${t}`,{fields:n,muteUpdateNotifications:"boolean"},r).post(s))}async deleteIssueWorkItem(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/timeTracking/workItems/${t}`,{fields:n},s).delete())}},D=class extends u{async getIssueVcsChanges(e,t){return this.youtrack.fetch(new i(`api/issues/${e}/vcsChanges`,{fields:n,...c("$top","$skip")},t).get())}async linkIssueVcsChange(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/vcsChanges`,{fields:n,muteUpdateNotifications:"boolean"},s).post(t))}async getIssueVcsChangeById(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/vcsChanges/${t}`,{fields:n},s).get())}async updateIssueVcsChange(e,t,s,r){return this.youtrack.fetch(new i(`api/issues/${e}/vcsChanges/${t}`,{fields:n,muteUpdateNotifications:"boolean"},r).post(s))}async detachIssueVcsChange(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/vcsChanges/${t}`,{fields:n},s).delete())}},L=class extends u{async getIssueAttachments(e,t){return this.youtrack.fetch(new i(`api/issues/${e}/attachments`,{fields:n,...c("$skip","$top")},t).get())}async createIssueAttachment(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/attachments`,{fields:n,muteUpdateNotifications:"boolean"},s).postFile(t))}async getIssueAttachmentById(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/attachments/${t}`,{fields:n},s).get())}async updateIssueAttachment(e,t,s,r){return this.youtrack.fetch(new i(`api/issues/${e}/attachments/${t}`,{fields:n},r).post(s))}async deleteIssueAttachment(e,t,s){return this.youtrack.fetch(new i(`api/issues/${e}/attachments/${t}`,{fields:n},s).delete())}},R=class extends u{async getProjects(e){return this.youtrack.fetch(new i("api/admin/projects",{fields:n,...c("$top","$skip")},e).get())}async createProject(e,t){return this.youtrack.fetch(new i("api/admin/projects",{fields:n,template:"string"},t).post(e))}async getProjectById(e,t){return this.youtrack.fetch(new i(`api/admin/projects/${e}`,{fields:n},t).get())}async updateProject(e,t,s){return this.youtrack.fetch(new i(`api/admin/projects/${e}`,{fields:n},s).post(t))}async deleteProject(e,t){return this.youtrack.fetch(new i(`api/admin/projects/${e}`,{fields:n},t).delete())}async getProjectArticles(e,t){return this.youtrack.fetch(new i(`api/admin/projects/${e}/articles`,{fields:n,...c("$top","$skip")},t).get())}async getProjectCustomFields(e,t){return this.youtrack.fetch(new i(`api/admin/projects/${e}/customFields`,{fields:n,...c("$top","$skip")},t).get())}async addCustomFieldToProject(e,t,s){return this.youtrack.fetch(new i(`api/admin/projects/${e}/customFields`,{fields:n},s).post(t))}async getProjectCustomFieldById(e,t,s){return this.youtrack.fetch(new i(`api/admin/projects/${e}/customFields/${t}`,{fields:n},s).get())}async updateProjectCustomField(e,t,s,r){return this.youtrack.fetch(new i(`api/admin/projects/${e}/customFields/${t}`,{fields:n},r).post(s))}async removeProjectCustomField(e,t,s){return this.youtrack.fetch(new i(`api/admin/projects/${e}/customFields/${t}`,{fields:n},s).delete())}async getProjectIssues(e,t){return this.youtrack.fetch(new i(`api/admin/projects/${e}/issues`,{fields:n,...c("$top","$skip","customFields")},t).get())}async createProjectIssue(e,t,s){return this.youtrack.fetch(new i(`api/admin/projects/${e}/issues`,{fields:n,muteUpdateNotifications:"boolean"},s).post(t))}async getProjectIssueById(e,t,s){return this.youtrack.fetch(new i(`api/admin/projects/${e}/issues/${t}`,{fields:n},s).get())}async updateProjectIssue(e,t,s,r){return this.youtrack.fetch(new i(`api/admin/projects/${e}/issues/${t}`,{fields:n,muteUpdateNotifications:"boolean"},r).post(s))}async deleteProjectIssue(e,t,s){return this.youtrack.fetch(new i(`api/admin/projects/${e}/issues/${t}`,{fields:n},s).delete())}async getProjectTimeTrackingSettings(e,t){return this.youtrack.fetch(new i(`api/admin/projects/${e}/timeTrackingSettings`,{fields:n},t).get())}async updateProjectTimeTrackingSettings(e,t,s){return this.youtrack.fetch(new i(`api/admin/projects/${e}/timeTrackingSettings`,{fields:n},s).post(t))}async getProjectWorkItemTypes(e,t){return this.youtrack.fetch(new i(`api/admin/projects/${e}/timeTrackingSettings/workItemTypes`,{fields:n,...c("$top","$skip")},t).get())}async addProjectWorkItemType(e,t,s){return this.youtrack.fetch(new i(`api/admin/projects/${e}/timeTrackingSettings/workItems`,{fields:n,muteUpdateNotifications:"boolean"},s).post(t))}async getProjectWorkItemTypeById(e,t,s){return this.youtrack.fetch(new i(`api/admin/projects/${e}/timeTrackingSettings/workItems/${t}`,{fields:n},s).get())}async deleteProjectWorkItemType(e,t,s){return this.youtrack.fetch(new i(`api/admin/projects/${e}/timeTrackingSettings/workItems/${t}`,{fields:n},s).delete())}},G=class extends u{async getBuildBundles(e){return this.youtrack.fetch(new i("api/admin/customFieldSettings/bundles/build",{fields:n,...c("$skip","$top")},e).get())}async createBuildBundle(e,t){return this.youtrack.fetch(new i("api/admin/customFieldSettings/bundles/build",{fields:n},t).post(e))}async getBuildBundleById(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/build/${e}`,{fields:n},t).get())}async updateBuildBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/build/${e}`,{fields:n},s).post(t))}async deleteBuildBundle(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/build/${e}`,{fields:n},t).delete())}async getBuildBundleValues(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/build/${e}/values`,{fields:n,...c("$top","$skip")},t).get())}async addBuildToBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/build/${e}/values`,{fields:n},s).post(t))}async getBuildFromBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/build/${e}/values/${t}`,{fields:n},s).get())}async updateBuildInBundle(e,t,s,r){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/build/${e}/values/${t}`,{fields:n},r).post(s))}async removeBuildFromBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/build/${e}/values/${t}`,{fields:n},s).delete())}},Q=class extends u{async getEnumBundles(e){return this.youtrack.fetch(new i("api/admin/customFieldSettings/bundles/enum",{fields:n,...c("$skip","$top")},e).get())}async createEnumBundle(e,t){return this.youtrack.fetch(new i("api/admin/customFieldSettings/bundles/enum",{fields:n},t).post(e))}async getEnumBundle(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/enum/${e}`,{fields:n},t).get())}async updateEnumBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/enum/${e}`,{fields:n},s).post(t))}async deleteEnumBundle(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/enum/${e}`,{fields:n},t).delete())}async getEnumBundleValues(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/enum/${e}/values`,{fields:n,...c("$top","$skip")},t).get())}async addEnumBundleValue(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/enum/${e}/values`,{fields:n},s).post(t))}async getEnumBundleValueById(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/enum/${e}/values/${t}`,{fields:n},s).get())}async updateEnumBundleValue(e,t,s,r){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/enum/${e}/values/${t}`,{fields:n},r).post(s))}async deleteEnumBundleValue(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/enum/${e}/values/${t}`,{fields:n},s).delete())}},Y=class extends u{async getOwnedBundles(e){return this.youtrack.fetch(new i("api/admin/customFieldSettings/bundles/owned",{fields:n,...c("$top","$skip")},e).get())}async createOwnedBundle(e,t){return this.youtrack.fetch(new i("api/admin/customFieldSettings/bundles/owned",{fields:n},t).post(e))}async getOwnedBundleById(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/owned/${e}`,{fields:n},t).get())}async updateOwnedBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/owned/${e}`,{fields:n},s).post(t))}async deleteOwnedBundle(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/owned/${e}`,{fields:n},t).delete())}async getOwnedBundleValues(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/owned/${e}/values`,{fields:n,...c("$top","$skip")},t).get())}async addOwnedToBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/owned/${e}/values`,{fields:n},s).post(t))}async updateOwnedBundleValue(e,t,s,r){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/owned/${e}/values/${t}`,{fields:n},r).post(s))}async removeOwnedFromBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/owned/${e}/values/${t}`,{fields:n},s).delete())}},M=class extends u{async getStateBundles(e){return this.youtrack.fetch(new i("api/admin/customFieldSettings/bundles/state",{fields:n,...c("$top","$skip")},e).get())}async createStateBundle(e,t){return this.youtrack.fetch(new i("api/admin/customFieldSettings/bundles/state",{fields:n},t).post(e))}async getStateBundleById(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/state/${e}`,{fields:n},t).get())}async updateStateBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/state/${e}`,{fields:n},s).post(t))}async deleteStateBundle(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/state/${e}`,{fields:n},t).delete())}async getStateBundleValues(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/state/${e}/values`,{fields:n,...c("$top","$skip")},t).get())}async addStateToBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/state/${e}/values`,{fields:n},s).post(t))}async updateStateBundleValue(e,t,s,r){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/state/${e}/values/${t}`,{fields:n},r).post(s))}async removeStateFromBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/state/${e}/values/${t}`,{fields:n},s).delete())}},q=class extends u{async getUserBundles(e){return this.youtrack.fetch(new i("api/admin/customFieldSettings/bundles/user",{fields:n,...c("$top","$skip")},e).get())}async createUserBundle(e,t){return this.youtrack.fetch(new i("api/admin/customFieldSettings/bundles/user",{fields:n},t).post(e))}async getUserBundleById(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/user/${e}`,{fields:n},t).get())}async updateUserBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/user/${e}`,{fields:n},s).post(t))}async deleteUserBundle(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/user/${e}`,{fields:n},t).delete())}async getUserBundleAggregatedUsers(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/user/${e}/aggregatedUsers`,{fields:n,...c("$top","$skip")},t).get())}async getUserBundleUserGroups(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/user/${e}/groups`,{fields:n,...c("$top","$skip")},t).get())}async addUserGroupToUserBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/user/${e}/groups`,{fields:n},s).post(t))}async getUserGroupInBundleById(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/user/${e}/groups/${t}`,{fields:n},s).get())}async deleteUserGroupFromUserBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/user/${e}/groups/${t}`,{fields:n},s).delete())}async getUserBundleIndividualUsers(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/user/${e}/individuals`,{fields:n,...c("$top","$skip")},t).get())}async addIndividualUserToUserBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/user/${e}/individuals`,{fields:n},s).post(t))}async getIndividualUserInBundleById(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/user/${e}/individuals/${t}`,{fields:n},s).get())}async removeIndividualUserFromUserBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/user/${e}/individuals/${t}`,{fields:n},s).delete())}},_=class extends u{async getVersionBundles(e){return this.youtrack.fetch(new i("api/admin/customFieldSettings/bundles/version",{fields:n,...c("$top","$skip")},e).get())}async createVersionBundle(e,t){return this.youtrack.fetch(new i("api/admin/customFieldSettings/bundles/version",{fields:n},t).post(e))}async getVersionBundleById(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/version/${e}`,{fields:n},t).get())}async updateVersionBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/version/${e}`,{fields:n},s).post(t))}async deleteVersionBundle(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/version/${e}`,{fields:n},t).delete())}async getVersionBundleValues(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/version/${e}/values`,{fields:n,...c("$top","$skip")},t).get())}async addVersionToBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/version/${e}/values`,{fields:n},s).post(t))}async updateVersionBundleValue(e,t,s,r){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/version/${e}/values/${t}`,{fields:n},r).post(s))}async removeVersionFromBundle(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/bundles/version/${e}/values/${t}`,{fields:n},s).delete())}},H=class extends u{async getCustomFields(e){return this.youtrack.fetch(new i("api/admin/customFieldSettings/customFields",{fields:n,...c("$skip","$top")},e).get())}async createCustomField(e,t){return this.youtrack.fetch(new i("api/admin/customFieldSettings/customFields",{fields:n},t).post(e))}async getCustomFieldById(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/customFields/${e}`,{fields:n},t).get())}async updateCustomField(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/customFields/${e}`,{fields:n},s).post(t))}async deleteCustomField(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/customFields/${e}`,{fields:n},t).delete())}async getFieldTypes(e){return this.youtrack.fetch(new i("api/admin/customFieldSettings/types",{fields:n,...c("$top","$skip")},e).get())}async getCustomFieldDefaults(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/customFields/${e}/fieldDefaults`,{fields:n},t).get())}async updateCustomFieldDefaults(e,t,s){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/customFields/${e}/fieldDefaults`,{fields:n},s).post(t))}async getCustomFieldInstances(e,t){return this.youtrack.fetch(new i(`api/admin/customFieldSettings/customFields/${e}/instances`,{fields:n,...c("$top","$skip")},t).get())}},J=class extends u{async getBackupFileData(e,t){return this.youtrack.fetch(new i(`api/admin/databaseBackup/backups/${e}`,{fields:n},t).get())}},z=class extends u{async getGlobalSettings(e){return this.youtrack.fetch(new i("api/admin/globalSettings",{fields:n},e).get())}async updateGlobalSettings(e,t){return this.youtrack.fetch(new i("api/admin/globalSettings",{fields:n},t).post(e))}async getAppearanceSettings(e){return this.youtrack.fetch(new i("api/admin/globalSettings/appearanceSettings",{fields:n},e).get())}async updateAppearanceSettings(e,t){return this.youtrack.fetch(new i("api/admin/globalSettings/appearanceSettings",{fields:n},t).post(e))}async getLicense(e){return this.youtrack.fetch(new i("api/admin/globalSettings/license",{fields:n},e).get())}async updateLicense(e,t){return this.youtrack.fetch(new i("api/admin/globalSettings/license",{fields:n},t).post(e))}async getLocaleSettings(e){return this.youtrack.fetch(new i("api/admin/globalSettings/localeSettings",{fields:n},e).get())}async updateLocaleSettings(e,t){return this.youtrack.fetch(new i("api/admin/globalSettings/localeSettings",{fields:n},t).post(e))}async getNotificationSettings(e){return this.youtrack.fetch(new i("api/admin/globalSettings/notificationSettings",{fields:n},e).get())}async updateNotificationSettings(e,t){return this.youtrack.fetch(new i("api/admin/globalSettings/notificationSettings",{fields:n},t).post(e))}async getRestSettings(e){return this.youtrack.fetch(new i("api/admin/globalSettings/restSettings",{fields:n},e).get())}async updateRestSettings(e,t){return this.youtrack.fetch(new i("api/admin/globalSettings/restSettings",{fields:n},t).post(e))}async getSystemSettings(e){return this.youtrack.fetch(new i("api/admin/globalSettings/systemSettings",{fields:n},e).get())}async updateSystemSettings(e,t){return this.youtrack.fetch(new i("api/admin/globalSettings/systemSettings",{fields:n},t).post(e))}},X=class extends u{async getTelemetryData(e){return this.youtrack.fetch(new i("api/admin/telemetry",{fields:n},e).get())}},K=class extends u{async getDatabaseBackupSettings(e){return this.youtrack.fetch(new i("api/admin/databaseBackup/settings",{fields:n},e).get())}async updateDatabaseBackupSettings(e,t){return this.youtrack.fetch(new i("api/admin/databaseBackup/settings",{fields:n},t).post(e))}async getBackupStatus(e){return this.youtrack.fetch(new i("api/admin/databaseBackup/settings/backupStatus",{fields:n},e).get())}},Z=class extends u{async getGlobalTimeTrackingSettings(e){return this.youtrack.fetch(new i("api/admin/timeTrackingSettings",{fields:n},e).get())}async getWorkItemTypes(e){return this.youtrack.fetch(new i("api/admin/timeTrackingSettings/workItemTypes",{fields:n,...c("$skip","$top")},e).get())}async createWorkItemType(e,t){return this.youtrack.fetch(new i("api/admin/timeTrackingSettings/workItemTypes",{fields:n},t).post(e))}async getWorkItemTypeById(e,t){return this.youtrack.fetch(new i(`api/admin/timeTrackingSettings/workItemTypes/${e}`,{fields:n},t).get())}async updateWorkItemType(e,t,s){return this.youtrack.fetch(new i(`api/admin/timeTrackingSettings/workItemTypes/${e}`,{fields:n},s).post(t))}async deleteWorkItemType(e,t){return this.youtrack.fetch(new i(`api/admin/timeTrackingSettings/workItemTypes/${e}`,{fields:n},t).delete())}async getWorkTimeSettings(e){return this.youtrack.fetch(new i("api/admin/timeTrackingSettings/workTimeSettings",{fields:n},e).get())}async updateWorkTimeSettings(e,t){return this.youtrack.fetch(new i("api/admin/timeTrackingSettings/workTimeSettings",{fields:n},t).post(e))}},w=class a{static client(e,t){return new a(e,async({url:s,headers:r,data:o,...d})=>{let p=await fetch(ce(e,s),{headers:{Authorization:`Bearer ${t}`,Accept:"application/json","Content-Type":"application/json",...r},...o?{body:Ee(o)}:{},...d});if(!p.ok)throw new Error(`Error: ${p.status} ${p.statusText}`);return p.json()})}static axiosClient(e,t,s){return new a(t,async({url:r,headers:o,...d})=>{let p={url:ce(t,r),headers:{Authorization:`Bearer ${s}`,Accept:"application/json;charset=utf-8","Content-Type":"application/json",...o},...d},{data:m}=await e.request(p);return typeof m=="string"&&m!==""?JSON.parse(m):m})}static async widget(e){let{services:t}=await e.fetchHub("api/rest/services?query=applicationName:YouTrack"),s=t[0];if(!s)throw new Error("YouTrack application not found");return new a(s.homeUrl,r=>{let{url:o,data:d,...p}=r;return e.fetch(s.id,o,{...d?{body:d}:{},...p})})}constructor(e,t){Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"fetch",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"Agiles",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"Activities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"Articles",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"Groups",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"IssueLinkTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"Issues",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"IssueComments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"IssueLinks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"IssueTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"IssueTimeTracking",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"IssueVcsChanges",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"IssueAttachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"SavedQueries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"Search",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"Tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"Users",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"WorkItems",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"Admin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.Agiles=new F(this),this.Activities=new S(this),this.Articles=new v(this),this.Commands=new T(this),this.Groups=new B(this),this.IssueLinkTypes=new j(this),this.Issues=new A(this),this.IssueComments=new O(this),this.IssueLinks=new N(this),this.IssueTags=new W(this),this.IssueTimeTracking=new V(this),this.IssueVcsChanges=new D(this),this.IssueAttachments=new L(this),this.SavedQueries=new P(this),this.Search=new C(this),this.Tags=new U(this),this.Users=new x(this),this.WorkItems=new E(this),this.Admin={Projects:new R(this),BuildBundles:new G(this),EnumBundles:new Q(this),OwnedBundles:new Y(this),StateBundles:new M(this),UserBundles:new q(this),VersionBundles:new _(this),CustomFields:new H(this),BackupFiles:new J(this),DatabaseBackupSettings:new K(this),GlobalSettings:new z(this),TelemetryData:new X(this),GlobalTimeTrackingSettings:new Z(this)}}};var ee=null;function Oe(a=(0,de.getPreferenceValues)()){return ee||(ee=w.client(a.instance,a.token)),ee}var le=Oe;var Ne=["id"];function l(a){return[...Ne,...a]}var pe=["summary","created","updated","resolved","description","idReadable",{customFields:["name","id",{value:["name",{color:["background","foreground"]}]}]},{project:["id","name","shortName"]}],f=l(["fullName","login","avatarUrl","email"]),me=l(pe),he=l([...pe,{attachments:["name","url"]},{reporter:f},{updater:f},{customFields:[{value:["login","fullName","avatarUrl"]},"name"]},{tags:["name","id",{color:["foreground","background"]}]}]),fe=l(["idReadable","description","summary","numberInProject",{tags:["name"]},{project:["shortName"]}]),We=l([{field:["name"]}]),te=l(["name","shortName",{customFields:We}]),qe=l(["id","name","archived","description","isResolved",{color:["background","foreground"]}]),ye=l(["name",{color:["background","foreground"]}]),ge=l(["name","autoAttached"]),ke=l(["text",{duration:["minutes","presentation"]},{type:["name","autoAttached"]}]),$e=l([{commands:["error","description"]}]),we=l(["text","created",{author:f,attachments:["name","url"]}]);var se=null,b=class a{yt;constructor(){this.yt=le()}static getInstance(){return se||(se=new a),se}async fetchIssues(e,t){return(await this.yt.Issues.getIssues({fields:me,query:e,$top:t})).map(r=>({id:r.idReadable,summary:r.summary??"",date:new Date(r.updated).toDateString(),created:new Date(r.created).toDateString(),resolved:!!r.resolved,description:r.description??"",customFields:r.customFields?.filter(o=>["Type","State","Priority"].includes(o.name)).map(o=>({id:o.id,name:o.name,value:re(o.value)}))??[],project:{name:r.project.name,shortName:r.project.shortName,id:r.project.id}}))}async fetchProjects(e){return(await this.yt.Admin.Projects.getProjects({fields:te,$top:e})).map(s=>({id:s.id,shortName:s.shortName,name:s.name}))}async fetchTags(e){return(await this.yt.Tags.getTags({fields:ye,$top:e})).filter(s=>s?.name!=="Star")}async fetchProjectById(e){let t=await this.yt.Admin.Projects.getProjectById(e,{fields:te});return{id:t.id,shortName:t.shortName,name:t.name}}async createIssue(e){let{summary:t,description:s,project:{id:r},tags:o}=e;return await this.yt.Issues.createIssue({summary:t,description:s,project:{id:r},tags:o},{fields:fe})}async applyCommandToIssue(e,{command:t,comment:s,silent:r=!0}){await this.yt.Commands.applyCommandToIssues({issues:[{idReadable:e}],query:t,silent:r,comment:s})}async getCommandSuggestions(e,{command:t}){return await this.yt.Commands.getCommandSuggestions({issues:[{idReadable:e}],query:t},{fields:$e})}async fetchIssueDetails(e){let t=await this.yt.Issues.getIssueById(e.id,{fields:he}),s=t.customFields?.find(h=>h.name==="Assignee")?.value??null,{reporter:r,updater:o,tags:d,created:p,updated:m,attachments:y,project:g}=t;if(g)return{...e,attachments:y,date:k(m??0),created:k(p??0),assignee:s?{...s,avatarUrl:$(s.avatarUrl,this.yt.baseUrl)}:null,reporter:r?{...r,avatarUrl:$(r.avatarUrl,this.yt.baseUrl)}:null,updater:o?{...o,avatarUrl:$(o.avatarUrl,this.yt.baseUrl)}:null,tags:d.map(h=>({...h,name:h.name??""})),workItemTypes:await this.yt.Admin.Projects.getProjectWorkItemTypes(g.id,{fields:ge})}}async fetchFavorites(e){let t={fetched:[],errored:[]};for(let s of e)try{let r=await this.fetchProjectById(s);t.fetched.push(r)}catch{t.errored.push(s)}return t}async createWorkItem(e,t){!e.project||!ae(t.duration.presentation)||await this.yt.IssueTimeTracking.createIssueWorkItem(e.id,{duration:{presentation:t.duration.presentation},date:t.date,type:t.type,text:t.text},{fields:ke})}async fetchUsers(){return(await this.yt.Users.getUsers({fields:f,$top:-1})).map(t=>({...t,avatarUrl:$(t.avatarUrl,this.yt.baseUrl)}))}async fetchSelf(){return await this.yt.Users.getCurrentUserProfile({fields:f})}async fetchComments(e,{top:t}={}){return await this.yt.IssueComments.getIssueComments(e,{fields:we,$top:t}).then(s=>s.map(r=>({...r,text:r.text??""})))}async deleteIssue(e){try{await this.yt.Issues.deleteIssue(e)}catch(t){if(t instanceof SyntaxError&&t.message.includes("Unexpected end of JSON input"))return;throw t}}};var Ve=10;async function Ie(a){let e=b.getInstance(),{instance:t}=(0,be.getPreferenceValues)();try{return(await e.fetchComments(a.issueId,{top:a.top??Ve})).map(r=>({...r,text:ne(r,t),attachments:r.attachments.map(o=>({...o,url:o.url?`${t}/${o.url}`:null})),created:k(r.created)}))}catch(s){throw ie(s,"Error fetching comments"),s}}
/*! Bundled license information:

youtrack-client/dist/index.mjs:
  (*!
   * youtrack-client v0.5.3
   * Copyright (C) 2012-2025 undefined
   * Date: Thu, 03 Jul 2025 22:10:17 GMT
   *)
*/
