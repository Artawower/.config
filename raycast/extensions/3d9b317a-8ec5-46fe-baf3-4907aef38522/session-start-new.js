"use strict";var G=Object.create;var p=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var m=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),K=(e,r)=>{for(var t in r)p(e,t,{get:r[t],enumerable:!0})},F=(e,r,t,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of R(r))!H.call(e,n)&&n!==t&&p(e,n,{get:()=>r[n],enumerable:!(s=N(r,n))||s.enumerable});return e};var U=(e,r,t)=>(t=e!=null?G(j(e)):{},F(r||!e||!e.__esModule?p(t,"default",{value:e,enumerable:!0}):t,e)),V=e=>F(p({},"__esModule",{value:!0}),e);var x=m((ue,v)=>{"use strict";var C=require("fs"),y;function Y(){try{return C.statSync("/.dockerenv"),!0}catch{return!1}}function J(){try{return C.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}v.exports=()=>(y===void 0&&(y=Y()||J()),y)});var T=m((le,A)=>{"use strict";var Q=require("os"),Z=require("fs"),O=x(),k=()=>{if(process.platform!=="linux")return!1;if(Q.release().toLowerCase().includes("microsoft"))return!O();try{return Z.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!O():!1}catch{return!1}};process.env.__IS_WSL_TEST__?A.exports=k:A.exports=k()});var W=m((fe,q)=>{"use strict";q.exports=(e,r,t)=>{let s=n=>Object.defineProperty(e,r,{value:n,enumerable:!0,writable:!0});return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){let n=t();return s(n),n},set(n){s(n)}}),e}});var z=m((pe,L)=>{var ee=require("path"),re=require("child_process"),{promises:P,constants:I}=require("fs"),d=T(),te=x(),E=W(),D=ee.join(__dirname,"xdg-open"),{platform:u,arch:$}=process,ne=(()=>{let e="/mnt/",r;return async function(){if(r)return r;let t="/etc/wsl.conf",s=!1;try{await P.access(t,I.F_OK),s=!0}catch{}if(!s)return e;let n=await P.readFile(t,{encoding:"utf8"}),c=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(n);return c?(r=c.groups.mountPoint.trim(),r=r.endsWith("/")?r:`${r}/`,r):e}})(),b=async(e,r)=>{let t;for(let s of e)try{return await r(s)}catch(n){t=n}throw t},g=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return b(e.app,i=>g({...e,app:i}));let{name:r,arguments:t=[]}=e.app||{};if(t=[...t],Array.isArray(r))return b(r,i=>g({...e,app:{name:i,arguments:t}}));let s,n=[],c={};if(u==="darwin")s="open",e.wait&&n.push("--wait-apps"),e.background&&n.push("--background"),e.newInstance&&n.push("--new"),r&&n.push("-a",r);else if(u==="win32"||d&&!te()){let i=await ne();s=d?`${i}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,n.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),d||(c.windowsVerbatimArguments=!0);let o=["Start"];e.wait&&o.push("-Wait"),r?(o.push(`"\`"${r}\`""`,"-ArgumentList"),e.target&&t.unshift(e.target)):e.target&&o.push(`"${e.target}"`),t.length>0&&(t=t.map(f=>`"\`"${f}\`""`),o.push(t.join(","))),e.target=Buffer.from(o.join(" "),"utf16le").toString("base64")}else{if(r)s=r;else{let i=!__dirname||__dirname==="/",o=!1;try{await P.access(D,I.X_OK),o=!0}catch{}s=process.versions.electron||u==="android"||i||!o?"xdg-open":D}t.length>0&&n.push(...t),e.wait||(c.stdio="ignore",c.detached=!0)}e.target&&n.push(e.target),u==="darwin"&&t.length>0&&n.push("--args",...t);let l=re.spawn(s,n,c);return e.wait?new Promise((i,o)=>{l.once("error",o),l.once("close",f=>{if(e.allowNonzeroExitCode&&f>0){o(new Error(`Exited with code ${f}`));return}i(l)})}):(l.unref(),l)},S=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a `target`");return g({...r,target:e})},se=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a `name`");let{arguments:t=[]}=r||{};if(t!=null&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return g({...r,app:{name:e,arguments:t}})};function M(e){if(typeof e=="string"||Array.isArray(e))return e;let{[$]:r}=e;if(!r)throw new Error(`${$} is not supported`);return r}function _({[u]:e},{wsl:r}){if(r&&d)return M(r);if(!e)throw new Error(`${u} is not supported`);return M(e)}var h={};E(h,"chrome",()=>_({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));E(h,"firefox",()=>_({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));E(h,"edge",()=>_({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));S.apps=h;S.openApp=se;L.exports=S});var ae={};K(ae,{default:()=>ie});module.exports=V(ae);var X=U(z()),w=require("@raycast/api");var a=require("@raycast/api");async function oe(){let e=await(0,a.getApplications)(),r=[];try{r=await(0,a.getApplications)("~/Applications")}catch{}let t=["com.philipyoungg.session-setapp","com.philipyoungg.session","com.philipyoungg.session-direct"];return e.some(({bundleId:s})=>s&&t.includes(s))||r.some(({bundleId:s})=>s&&t.includes(s))}async function B(){if(!await oe()){let e={style:a.Toast.Style.Failure,title:"Session is not installed",message:"Read more here",primaryAction:{title:"Download information",onAction:r=>{(0,a.open)("https://www.stayinsession.com"),r.hide()}}};return await(0,a.showToast)(e),!1}return!0}var ie=async()=>{await B()&&((0,X.default)("session:///start-previous"),await(0,w.closeMainWindow)(),await(0,w.showHUD)("Previous session started \u23F2\uFE0F"))};
