"use strict";var me=Object.create;var B=Object.defineProperty;var be=Object.getOwnPropertyDescriptor;var ge=Object.getOwnPropertyNames;var ye=Object.getPrototypeOf,$e=Object.prototype.hasOwnProperty;var we=(e,n)=>{for(var r in n)B(e,r,{get:n[r],enumerable:!0})},X=(e,n,r,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of ge(n))!$e.call(e,s)&&s!==r&&B(e,s,{get:()=>n[s],enumerable:!(t=be(n,s))||t.enumerable});return e};var G=(e,n,r)=>(r=e!=null?me(ye(e)):{},X(n||!e||!e.__esModule?B(r,"default",{value:e,enumerable:!0}):r,e)),ke=e=>X(B({},"__esModule",{value:!0}),e);var We={};we(We,{default:()=>de});module.exports=ke(We);var Q=require("react"),b=require("@raycast/api");var l=G(require("react")),f=require("@raycast/api");var ee=Object.prototype.hasOwnProperty;function K(e,n){var r,t;if(e===n)return!0;if(e&&n&&(r=e.constructor)===n.constructor){if(r===Date)return e.getTime()===n.getTime();if(r===RegExp)return e.toString()===n.toString();if(r===Array){if((t=e.length)===n.length)for(;t--&&K(e[t],n[t]););return t===-1}if(!r||typeof e=="object"){t=0;for(r in e)if(ee.call(e,r)&&++t&&!ee.call(n,r)||!(r in n)||!K(e[r],n[r]))return!1;return Object.keys(n).length===t}}return e!==e&&n!==n}var O=G(require("node:fs")),J=G(require("node:path")),ae=G(require("node:crypto"));var se=require("react/jsx-runtime");function xe(e){let n=(0,l.useRef)(e),r=(0,l.useRef)(0);return K(e,n.current)||(n.current=e,r.current+=1),(0,l.useMemo)(()=>n.current,[r.current])}function E(e){let n=(0,l.useRef)(e);return n.current=e,n}function q(e,n){let r=e instanceof Error?e.message:String(e);return(0,f.showToast)({style:f.Toast.Style.Failure,title:n?.title??"Something went wrong",message:n?.message??r,primaryAction:n?.primaryAction??te(e),secondaryAction:n?.primaryAction?te(e):void 0})}var te=e=>{let n=!0,r="[Extension Name]...",t="";try{let o=JSON.parse((0,O.readFileSync)((0,J.join)(f.environment.assetsPath,"..","package.json"),"utf8"));r=`[${o.title}]...`,t=`https://raycast.com/${o.owner||o.author}/${o.name}`,(!o.owner||o.access==="public")&&(n=!1)}catch{}let s=f.environment.isDevelopment||n,u=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:s?"Copy Logs":"Report Error",onAction(o){o.hide(),s?f.Clipboard.copy(u):(0,f.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(t)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${u}
\`\`\`
`)}`)}}};function ie(e,n,r){let t=(0,l.useRef)(0),[s,u]=(0,l.useState)({isLoading:!0}),o=E(e),c=E(r?.abortable),i=E(n||[]),g=E(r?.onError),h=E(r?.onData),$=E(r?.onWillExecute),v=E(r?.failureToastOptions),S=E(s.data),k=(0,l.useRef)(null),a=(0,l.useRef)({page:0}),p=(0,l.useRef)(!1),C=(0,l.useRef)(!0),P=(0,l.useRef)(50),x=(0,l.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++t.current),[c]),m=(0,l.useCallback)((...I)=>{let A=x();$.current?.(I),u(d=>({...d,isLoading:!0}));let V=ve(o.current)(...I);function W(d){return d.name=="AbortError"||A===t.current&&(g.current?g.current(d):f.environment.launchType!==f.LaunchType.Background&&q(d,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(D){D.hide(),k.current?.(...i.current||[])}},...v.current}),u({error:d,isLoading:!1})),d}return typeof V=="function"?(p.current=!0,V(a.current).then(({data:d,hasMore:D,cursor:he})=>(A===t.current&&(a.current&&(a.current.cursor=he,a.current.lastItem=d?.[d.length-1]),h.current&&h.current(d,a.current),D&&(P.current=d.length),C.current=D,u(pe=>a.current.page===0?{data:d,isLoading:!1}:{data:(pe.data||[])?.concat(d),isLoading:!1})),d),d=>(C.current=!1,W(d)))):(p.current=!1,V.then(d=>(A===t.current&&(h.current&&h.current(d),u({data:d,isLoading:!1})),d),W))},[h,g,i,o,u,k,$,a,v,x]);k.current=m;let T=(0,l.useCallback)(()=>{a.current={page:0};let I=i.current||[];return m(...I)},[m,i]),R=(0,l.useCallback)(async(I,A)=>{let V;try{if(A?.optimisticUpdate){x(),typeof A?.rollbackOnError!="function"&&A?.rollbackOnError!==!1&&(V=structuredClone(S.current?.value));let W=A.optimisticUpdate;u(d=>({...d,data:W(d.data)}))}return await I}catch(W){if(typeof A?.rollbackOnError=="function"){let d=A.rollbackOnError;u(D=>({...D,data:d(D.data)}))}else A?.optimisticUpdate&&A?.rollbackOnError!==!1&&u(d=>({...d,data:V}));throw W}finally{A?.shouldRevalidateAfter!==!1&&(f.environment.launchType===f.LaunchType.Background||f.environment.commandMode==="menu-bar"?await T():T())}},[T,S,u,x]),_=(0,l.useCallback)(()=>{a.current.page+=1;let I=i.current||[];m(...I)},[a,i,m]);(0,l.useEffect)(()=>{a.current={page:0},r?.execute!==!1?m(...n||[]):x()},[xe([n,r?.execute,m]),c,a]),(0,l.useEffect)(()=>()=>{x()},[x]);let N=r?.execute!==!1?s.isLoading:!1,F={...s,isLoading:N},j=p.current?{pageSize:P.current,hasMore:C.current,onLoadMore:_}:void 0;return{...F,revalidate:T,mutate:R,pagination:j}}function ve(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function re(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function Se(e){return e instanceof URLSearchParams?e.toString():e}function oe(e,n=[]){function r(t){return"update"in e?e.update(t,"utf8"):e.write(t)}return{dispatch:function(t){t=Se(t),t===null?this._null():this["_"+typeof t](t)},_object:function(t){let s=/\[object (.*)\]/i,u=Object.prototype.toString.call(t),o=s.exec(u)?.[1]??"unknown:["+u+"]";o=o.toLowerCase();let c=null;if((c=n.indexOf(t))>=0){this.dispatch("[CIRCULAR:"+c+"]");return}else n.push(t);if(Buffer.isBuffer(t))return r("buffer:"),r(t.toString("utf8"));if(o!=="object"&&o!=="function"&&o!=="asyncfunction")if(this["_"+o])this["_"+o](t);else throw new Error('Unknown object type "'+o+'"');else{let i=Object.keys(t);i=i.sort(),re(t)||i.splice(0,0,"prototype","__proto__","constructor"),r("object:"+i.length+":");let g=this;return i.forEach(function(h){g.dispatch(h),r(":"),g.dispatch(t[h]),r(",")})}},_array:function(t,s){s=typeof s<"u"?s:!1;let u=this;if(r("array:"+t.length+":"),!s||t.length<=1){t.forEach(function(i){u.dispatch(i)});return}let o=[],c=t.map(function(i){let g=Ee(),h=n.slice();return oe(g,h).dispatch(i),o=o.concat(h.slice(n.length)),g.read().toString()});n=n.concat(o),c.sort(),this._array(c,!1)},_date:function(t){r("date:"+t.toJSON())},_symbol:function(t){r("symbol:"+t.toString())},_error:function(t){r("error:"+t.toString())},_boolean:function(t){r("bool:"+t.toString())},_string:function(t){r("string:"+t.length+":"),r(t.toString())},_function:function(t){r("fn:"),re(t)?this.dispatch("[native]"):this.dispatch(t.toString()),this.dispatch("function-name:"+String(t.name)),this._object(t)},_number:function(t){r("number:"+t.toString())},_xml:function(t){r("xml:"+t.toString())},_null:function(){r("Null")},_undefined:function(){r("Undefined")},_regexp:function(t){r("regex:"+t.toString())},_uint8array:function(t){r("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){r("int8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){r("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){r("int16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){r("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){r("int32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){r("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){r("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){r("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){r("url:"+t.toString())},_map:function(t){r("map:");let s=Array.from(t);this._array(s,!0)},_set:function(t){r("set:");let s=Array.from(t);this._array(s,!0)},_file:function(t){r("file:"),this.dispatch([t.name,t.size,t.type,t.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){r("domwindow")},_bigint:function(t){r("bigint:"+t.toString())},_process:function(){r("process")},_timer:function(){r("timer")},_pipe:function(){r("pipe")},_tcp:function(){r("tcp")},_udp:function(){r("udp")},_tty:function(){r("tty")},_statwatcher:function(){r("statwatcher")},_securecontext:function(){r("securecontext")},_connection:function(){r("connection")},_zlib:function(){r("zlib")},_context:function(){r("context")},_nodescript:function(){r("nodescript")},_httpparser:function(){r("httpparser")},_dataview:function(){r("dataview")},_signal:function(){r("signal")},_fsevent:function(){r("fsevent")},_tlswrap:function(){r("tlswrap")}}}function Ee(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function ce(e,n){let r=this[e];return r instanceof Date?`__raycast_cached_date__${r.toString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:n}function le(e,n){return typeof n=="string"&&n.startsWith("__raycast_cached_date__")?new Date(n.replace("__raycast_cached_date__","")):typeof n=="string"&&n.startsWith("__raycast_cached_buffer__")?Buffer.from(n.replace("__raycast_cached_buffer__",""),"base64"):n}function H(e){let n=ae.default.createHash("sha1");return oe(n).dispatch(e),n.digest("hex")}var Ae=Symbol("cache without namespace"),ne=new Map;function Z(e,n,r){let t=r?.cacheNamespace||Ae,s=ne.get(t)||ne.set(t,new f.Cache({namespace:r?.cacheNamespace})).get(t);if(!s)throw new Error("Missing cache");let u=E(e),o=E(n),c=(0,l.useSyncExternalStore)(s.subscribe,()=>{try{return s.get(u.current)}catch($){console.error("Could not get Cache data:",$);return}}),i=(0,l.useMemo)(()=>{if(typeof c<"u"){if(c==="undefined")return;try{return JSON.parse(c,le)}catch($){return console.warn("The cached data is corrupted",$),o.current}}else return o.current},[c,o]),g=E(i),h=(0,l.useCallback)($=>{let v=typeof $=="function"?$(g.current):$;if(typeof v>"u")s.set(u.current,"undefined");else{let S=JSON.stringify(v,ce);s.set(u.current,S)}return v},[s,u,g]);return[i,h]}var z=Symbol();function Ce(e,n,r){let{initialData:t,keepPreviousData:s,internal_cacheKeySuffix:u,...o}=r||{},c=(0,l.useRef)(null),[i,g]=Z(H(n||[])+u,z,{cacheNamespace:H(e)}),h=(0,l.useRef)(i!==z?i:t),$=(0,l.useRef)(void 0),{mutate:v,revalidate:S,...k}=ie(e,n||[],{...o,onData(x,m){$.current=m,o.onData&&o.onData(x,m),!(m&&m.page>0)&&(c.current="promise",h.current=x,g(x))}}),a,p=k.pagination;$.current&&$.current.page>0&&k.data?a=k.data:c.current==="promise"?a=h.current:s&&i!==z?(a=i,p&&(p.hasMore=!0,p.pageSize=i.length)):s&&i===z?a=h.current:i!==z?(a=i,p&&(p.hasMore=!0,p.pageSize=i.length)):a=t;let C=E(a),P=(0,l.useCallback)(async(x,m)=>{let T;try{if(m?.optimisticUpdate){typeof m?.rollbackOnError!="function"&&m?.rollbackOnError!==!1&&(T=structuredClone(C.current));let R=m.optimisticUpdate(C.current);c.current="cache",h.current=R,g(R)}return await v(x,{shouldRevalidateAfter:m?.shouldRevalidateAfter})}catch(R){if(typeof m?.rollbackOnError=="function"){let _=m.rollbackOnError(C.current);c.current="cache",h.current=_,g(_)}else m?.optimisticUpdate&&m?.rollbackOnError!==!1&&(c.current="cache",h.current=T,g(T));throw R}},[g,v,C,h,c]);return(0,l.useEffect)(()=>{i!==z&&(c.current="cache",h.current=i)},[i]),{data:a,isLoading:k.isLoading,error:k.error,mutate:$.current&&$.current.page>0?v:P,pagination:p,revalidate:S}}function Te(e){if(e){let n=Pe(e);if(!n)return!1;if(n.subtype==="json"||n.suffix==="json"||n.suffix&&/\bjson\b/i.test(n.suffix)||n.subtype&&/\bjson\b/i.test(n.subtype))return!0}return!1}var Re=/^([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126});?$/;function Pe(e){let n=e.indexOf(";"),r=n!==-1?e.slice(0,n).trim():e.trim(),t=Re.exec(r.toLowerCase().toLowerCase());if(!t)return;let s=t[1],u=t[2],o,c=u.lastIndexOf("+");return c!==-1&&(o=u.substring(c+1),u=u.substring(0,c)),{type:s,subtype:u,suffix:o}}async function _e(e){if(!e.ok)throw new Error(e.statusText);let n=e.headers.get("content-type");return n&&Te(n)?await e.json():await e.text()}function Ie(e){return{data:e,hasMore:!1}}function Y(e,n){let{parseResponse:r,mapResult:t,initialData:s,execute:u,keepPreviousData:o,onError:c,onData:i,onWillExecute:g,failureToastOptions:h,...$}=n||{},v={initialData:s,execute:u,keepPreviousData:o,onError:c,onData:i,onWillExecute:g,failureToastOptions:h},S=E(r||_e),k=E(t||Ie),a=(0,l.useRef)(null),p=(0,l.useRef)(null),C=typeof e=="function"?e({page:0}):void 0;(!a.current||typeof p.current>"u"||p.current!==C)&&(a.current=e),p.current=C;let P=(0,l.useRef)(null),x=(0,l.useCallback)((R,_)=>async N=>{let F=await fetch(R(N),{signal:P.current?.signal,..._}),j=await S.current(F);return k.current?.(j)},[S,k]),m=(0,l.useCallback)(async(R,_)=>{let N=await fetch(R,{signal:P.current?.signal,..._}),F=await S.current(N);return k.current(F)?.data},[S,k]),T=(0,l.useMemo)(()=>p.current?x:m,[p,m,x]);return Ce(T,[a.current,$],{...v,internal_cacheKeySuffix:p.current+H(k.current)+H(S.current),abortable:P})}function ue(e,n){let{data:r,isLoading:t,mutate:s}=ie(async c=>{let i=await f.LocalStorage.getItem(c);return typeof i<"u"?JSON.parse(i,le):n},[e]);async function u(c){try{await s(f.LocalStorage.setItem(e,JSON.stringify(c,ce)),{optimisticUpdate(i){return i}})}catch(i){await q(i,{title:"Failed to set value in local storage"})}}async function o(){try{await s(f.LocalStorage.removeItem(e),{optimisticUpdate(){}})}catch(c){await q(c,{title:"Failed to remove value from local storage"})}}return{value:r,setValue:u,removeValue:o,isLoading:t}}var y=require("@raycast/api"),L=require("react/jsx-runtime"),Ue=async e=>{let n=e.svgs[0].html.toString().replace(/<path/g,'<path fill="currentColor"');await y.Clipboard.copy(n),await(0,y.showHUD)("Copied SVG to clipboard!")},De=async e=>{await y.Clipboard.copy(String.fromCharCode(parseInt(e.unicode,16))),await(0,y.showHUD)("Copied glyph to clipboard!")},Oe=async e=>{await y.Clipboard.copy(e.unicode),await(0,y.showHUD)("Copied unicode to clipboard!")},Le=async e=>{let n=`fa-${U[e.svgs[0].familyStyle.prefix].split(", ")[1].toLowerCase()} fa-${e.id}`;await y.Clipboard.copy(n),await(0,y.showHUD)("Copied classes to clipboard!")},Me=async e=>{await y.Clipboard.copy(e.id),await(0,y.showHUD)("Copied slug to clipboard!")},U={fass:"Sharp, Solid",fasr:"Sharp, Regular",fasl:"Sharp, Light",fast:"Sharp, Thin",fad:"Duotone, Solid",fadr:"Duotone, Regular",fadl:"Duotone, Light",fadt:"Duotone, Thin",fas:"Classic, Solid",far:"Classic, Regular",fal:"Classic, Light",fat:"Classic, Thin",fab:"Classic, Brands",fasds:"Sharp Duotone, Solid",fasdr:"Sharp Duotone, Regular",fasdl:"Sharp Duotone, Light",fasdt:"Sharp Duotone, Thin"};function M(e){return`${U[e].replace(", ","-").replace(" ","-").toLowerCase()}.svg`}function fe(e){let{PRIMARY_ACTION:n}=(0,y.getPreferenceValues)(),r=[{action:(0,L.jsx)(y.Action,{title:"Copy Icon Name",icon:"copy-clipboard-16",onAction:()=>Me(e)},"copyIconName"),id:"copyIconName"},{action:(0,L.jsx)(y.Action,{title:"Copy Icon Classes",icon:"copy-clipboard-16",onAction:()=>Le(e)},"copyIconClasses"),id:"copyIconClasses"},{action:(0,L.jsx)(y.Action,{title:"Copy as SVG",icon:"copy-clipboard-16",onAction:()=>Ue(e)},"copyAsSvg"),id:"copyAsSvg"},{action:(0,L.jsx)(y.Action,{title:"Copy Icon Glyph",icon:"copy-clipboard-16",onAction:()=>De(e)},"copyIconGlyph"),id:"copyIconGlyph"},{action:(0,L.jsx)(y.Action,{title:"Copy Icon Unicode",icon:"copy-clipboard-16",onAction:()=>Oe(e)},"copyIconUnicode"),id:"copyIconUnicode"}],t=r.findIndex(s=>s.id===n);if(t>-1){let[s]=r.splice(t,1);r.unshift(s)}return(0,L.jsx)(y.ActionPanel,{children:r.map(s=>s.action)})}var w=require("react/jsx-runtime"),Ve=(e,n)=>`query Search {
  search(query:"${e}", version: "6.7.2", first: 48) {
      id
      unicode
      svgs(filter: { familyStyles: [
        { family: ${n.split(" ").length===3?n.split(", ")[0].replace(" ","_").toUpperCase():n.split(", ")[0].toUpperCase()}, style: ${n.split(", ")[1].toUpperCase()} }
        { family: CLASSIC, style: BRANDS }
      ] }) {
          html
          familyStyle{
            prefix
          }
      }
  }
}
`;function de(){let{API_TOKEN:e,STYLE_PREFERENCE:n}=(0,b.getPreferenceValues)(),r="pro";e||(e="D7A31EA9-20D8-434E-A6C6-8ADC890ADCB8",r="free",n="fas");let[t,s]=(0,Q.useState)(n),[u,o]=(0,Q.useState)(""),[c,i]=Z("accessToken",""),{value:g,setValue:h}=ue("token-expiry-start"),[$,v]=Z("iconData");Y("https://api.fontawesome.com/token",{execute:!g||Date.now()-(g||0)>=36e5,onData:a=>{h(Date.now()),i(a.access_token)},method:"POST",headers:{Authorization:`Bearer ${e}`}});let{isLoading:S,data:k}=Y("https://api.fontawesome.com",{execute:!!c,keepPreviousData:!0,method:"POST",body:Ve(u,U[t]),onData:a=>{v(a)},headers:{Accept:"application/json",Authorization:`Bearer ${c}`}});return(0,w.jsx)(b.Grid,{isLoading:S,searchText:u,onSearchTextChange:o,inset:b.Grid.Inset.Large,columns:8,throttle:!0,searchBarPlaceholder:"Search icons...",searchBarAccessory:(0,w.jsx)(b.Grid.Dropdown,{tooltip:"Select Family & Style",onChange:a=>s(a),defaultValue:n,children:r==="pro"?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(b.Grid.Dropdown.Section,{title:"Classic Icons",children:Object.entries(U).slice(8,13).map(([a,p])=>(0,w.jsx)(b.Grid.Dropdown.Item,{title:p,value:a,icon:{source:M(a),tintColor:b.Color.SecondaryText}},a))}),(0,w.jsx)(b.Grid.Dropdown.Section,{title:"Sharp Icons",children:Object.entries(U).slice(0,4).map(([a,p])=>(0,w.jsx)(b.Grid.Dropdown.Item,{title:p,value:a,icon:{source:M(a),tintColor:b.Color.SecondaryText}},a))}),(0,w.jsx)(b.Grid.Dropdown.Section,{title:"Duotone Icons",children:Object.entries(U).slice(4,8).map(([a,p])=>(0,w.jsx)(b.Grid.Dropdown.Item,{title:p,value:a,icon:{source:M(a),tintColor:b.Color.SecondaryText}},a))}),(0,w.jsx)(b.Grid.Dropdown.Section,{title:"Sharp Duotone Icons",children:Object.entries(U).slice(13,17).map(([a,p])=>(0,w.jsx)(b.Grid.Dropdown.Item,{title:p,value:a,icon:{source:M(a),tintColor:b.Color.SecondaryText}},a))})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(b.Grid.Dropdown.Item,{title:"Classic, Solid",value:"fas",icon:{source:M("fas"),tintColor:b.Color.SecondaryText}},"fas"),(0,w.jsx)(b.Grid.Dropdown.Item,{title:"Classic, Brands",value:"fab",icon:{source:M("fab"),tintColor:b.Color.SecondaryText}},"fab")]})}),children:($||k)?.data.search.filter(a=>a.svgs.length!=0).map(a=>(0,w.jsx)(b.Grid.Item,{title:a.id,actions:fe(a),content:{value:{source:`data:image/svg+xml;base64,${Buffer.from(a.svgs[0].html).toString("base64")}`,tintColor:b.Color.PrimaryText},tooltip:a.id}},a.id))})}
