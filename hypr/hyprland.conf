monitor = eDP-1, preferred, auto, 2

input {
    kb_layout = us,ru
    kb_options = grp:caps_toggle
    numlock_by_default = true
    follow_mouse = 1
    sensitivity = 0.0

    touchpad {
        disable_while_typing = true
        tap-to-click = true
        clickfinger_behavior = true
        drag_lock = true
        tap-and-drag = true
    }

}

general {
    border_size = 2
    gaps_in = 8
    gaps_out = 16
    col.active_border = rgba(7b57ffee)
    col.inactive_border = rgba(2e2a3aaa)
    layout = dwindle
    resize_on_border = true
}

decoration {
    rounding = 8
    active_opacity = 0.86
    inactive_opacity = 0.76

    blur {
        enabled = true
        size = 6
        passes = 2
        new_optimizations = true
    }

    shadow {
        enabled = true
        range = 30
        render_power = 3
        color = rgba(00000070)
        offset = 0 5
    }
}

animations {
    enabled = true

    bezier = ease, 0.25, 0.1, 0.25, 1.0
    bezier = overshot, 0.05, 0.9, 0.1, 1.1

    animation = windows, 1, 2, overshot, slide
    animation = windowsOut, 1, 2, ease, slide
    animation = fade, 1, 2, ease
    animation = workspaces, 1, 2, ease, slide
    animation = border, 1, 2, ease
}

dwindle {
    pseudotile = true
    preserve_split = true
    force_split = 2
    special_scale_factor = 0.95
}

master {
    new_status = master
}

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    animate_manual_resizes = true
    focus_on_activate = true
}

cursor {
    hide_on_key_press = true
}

binds {
    hide_special_on_workspace_change = true
}



# plugin {
#     hyprexpo {
#         columns = 5
#         gap_size = 5
#         bg_col = rgb(111111)
#         workspace_method = first 1
#
#         enable_gesture = true
#         gesture_fingers = 3
#         gesture_distance = 300
#         gesture_positive = true
#     }
#
#     hyprfocus {
#         enabled = yes
#         animate_floating = yes
#         animate_workspacechange = yes
#         focus_animation = shrink
#
#         bezier = realsmooth, 0.28, 0.29, 0.69, 1.08
#
#         shrink {
#             shrink_percentage = 0.95
#             in_bezier = realsmooth
#             in_speed = 1
#             out_bezier = realsmooth
#             out_speed = 2
#         }
#     }
# }

workspace = special
workspace = 1, monitor:eDP-1, default:true, persistent:true
workspace = name:social, monitor:eDP-1, persistent:true
workspace = name:term, monitor:eDP-1, persistent:true
workspace = name:dev, monitor:eDP-1, persistent:true
workspace = name:other, monitor:eDP-1, persistent:true
workspace = name:www, monitor:eDP-1, persistent:true
workspace = name:entertainment, monitor:eDP-1, persistent:true
workspace = name:thrash, monitor:eDP-1, persistent:true
workspace = name:study, monitor:eDP-1, persistent:true
workspace = name:t3, monitor:eDP-1, persistent:true
workspace = name:load, monitor:eDP-1, persistent:true

env = PATH,$HOME/.local/bin:$HOME/.cargo/bin:$HOME/.nix-profile/bin:$HOME/.bun/bin:$HOME/.volta/bin:$HOME/.npm-global/bin:$HOME/.config/bin:$HOME/bin:$HOME/go/bin:$HOME/.go/bin:$PATH

exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=Hyprland
exec-once = darkman run
exec-once = ydotoold
exec-once = vicinae server
exec-once = pkill xremap; xremap-hypr --watch ~/.config/xremap/config.yml
exec-once = sleep 1 && /usr/bin/quickshell -c noctalia-shell
exec-once = sleep 1 && hyprvoice serve
exec-once = $HOME/.config/bin/wallpaper-rotate
exec-once = wl-clip-persist --clipboard regular
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store

windowrulev2 = workspace name:social silent, class:^(telegram-desktop)$
windowrulev2 = workspace name:social silent, class:^(mattermost)$
windowrulev2 = workspace name:social silent, class:^(discord)$
windowrulev2 = focusonactivate 0, class:^(telegram-desktop|org\.telegram\.desktop|mattermost|discord)$

windowrulev2 = workspace name:www silent, class:^(zen-browser)$
windowrulev2 = workspace name:www silent, class:^(app.zen_browser.zen)$

windowrulev2 = workspace name:dev silent, class:^(emacs)$
windowrulev2 = workspace name:other silent, class:^(brave-browser)$
windowrulev2 = workspace name:term silent, class:^(com\.mitchellh\.ghostty)$
windowrulev2 = workspace name:term silent, class:^(org\.wezfurlong\.wezterm)$

windowrulev2 = float, class:^(firefox)$, title:^(Picture-in-Picture)$
windowrulev2 = pin, class:^(firefox)$, title:^(Picture-in-Picture)$
windowrulev2 = float, class:^(app\.zen_browser\.zen)$, title:^(Picture-in-Picture)$
windowrulev2 = pin, class:^(app\.zen_browser\.zen)$, title:^(Picture-in-Picture)$


windowrulev2 = tile, class:^(org\.wezfurlong\.wezterm)$


bind = ALT, Return, exec, flatpak run org.wezfurlong.wezterm
bind = CTRL, Return, exec, ghostty
bind = ALT, Space, exec, vicinae open
bind = SUPER_ALT, L, exec, swaylock

# bind = ALT, O, exec, hyprctl dispatch hyprexpo:expo toggle

bind = ALT, Q, killactive,
bind = ALT, F, fullscreen, 1
bind = ALT_SHIFT, F, fullscreen, 0
bind = ALT_SHIFT, C, exec, hyprctl --batch "dispatch togglefloating; dispatch centerwindow"
bind = ALT, slash, togglesplit,
bind = ALT, G, togglespecialworkspace,
bind = ALT_SHIFT, G, movetoworkspace, special
bind = ALT, C, centerwindow,

bind = ALT, H, exec, ~/.config/bin/hypr-focus-or-workspace l
bind = ALT, L, exec, ~/.config/bin/hypr-focus-or-workspace r
bind = ALT, J, movefocus, d
bind = ALT, K, movefocus, u

bind = ALT_SHIFT, H, exec, ~/.config/bin/hypr-move-or-workspace l
bind = ALT_SHIFT, L, exec, ~/.config/bin/hypr-move-or-workspace r
bind = ALT_SHIFT, J, movewindow, d
bind = ALT_SHIFT, K, movewindow, u

bind = ALT_SHIFT, Left, movewindow, l
bind = ALT_SHIFT, Right, movewindow, r
bind = ALT_SHIFT, Down, movewindow, d
bind = ALT_SHIFT, Up, movewindow, u

binde = ALT, Minus, resizeactive, -10% 0
binde = ALT, Equal, resizeactive, 10% 0
binde = ALT_SHIFT, Minus, resizeactive, 0 -10%
binde = ALT_SHIFT, Equal, resizeactive, 0 10%

bind = ALT, 1, workspace, name:social
bind = ALT, 2, workspace, name:term
bind = ALT, 3, workspace, name:dev
bind = ALT, 4, workspace, name:other
bind = ALT, 5, workspace, name:www
bind = ALT, 6, workspace, name:entertainment
bind = ALT, 7, workspace, name:thrash
bind = ALT, 8, workspace, name:study
bind = ALT, 9, workspace, name:t3
bind = ALT, 0, workspace, name:load

bind = ALT, S, workspace, name:social
bind = ALT, D, workspace, name:dev
bind = ALT, W, workspace, name:www
bind = ALT, I, workspace, name:thrash
bind = ALT, T, workspace, name:term
bind = ALT, E, workspace, name:entertainment
bind = ALT, O, workspace, name:other

bind = ALT_SHIFT, 1, movetoworkspace, name:social
bind = ALT_SHIFT, 2, movetoworkspace, name:term
bind = ALT_SHIFT, 3, movetoworkspace, name:dev
bind = ALT_SHIFT, 4, movetoworkspace, name:other
bind = ALT_SHIFT, 5, movetoworkspace, name:www
bind = ALT_SHIFT, 6, movetoworkspace, name:entertainment
bind = ALT_SHIFT, 7, movetoworkspace, name:thrash
bind = ALT_SHIFT, 8, movetoworkspace, name:study
bind = ALT_SHIFT, 9, movetoworkspace, name:t3
bind = ALT_SHIFT, 0, movetoworkspace, name:load

bind = ALT_SHIFT, S, movetoworkspace, name:social
bind = ALT_SHIFT, W, movetoworkspace, name:www
bind = ALT_SHIFT, D, movetoworkspace, name:dev
bind = ALT_SHIFT, I, movetoworkspace, name:thrash
bind = ALT_SHIFT, T, movetoworkspace, name:term
bind = ALT_SHIFT, E, movetoworkspace, name:entertainment
bind = ALT_SHIFT, O, movetoworkspace, name:other

bind = ALT_CTRL, 1, movetoworkspacesilent, name:social
bind = ALT_CTRL, 2, movetoworkspacesilent, name:term
bind = ALT_CTRL, 3, movetoworkspacesilent, name:dev
bind = ALT_CTRL, 4, movetoworkspacesilent, name:other
bind = ALT_CTRL, 5, movetoworkspacesilent, name:www

bind = ALT, mouse_down, workspace, e-1
bind = ALT, mouse_up, workspace, e+1

bindm = CTRL_SUPER, mouse:272, movewindow
bindm = CTRL_SUPER, mouse:273, resizewindow

bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1+ -l 1.0
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1-
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioStop, exec, playerctl stop
bindl = , XF86AudioPrev, exec, playerctl previous
bindl = , XF86AudioNext, exec, playerctl next

bindel = , XF86MonBrightnessUp, exec, brightnessctl --class=backlight set +10%
bindel = , XF86MonBrightnessDown, exec, brightnessctl --class=backlight set 10%-

bind = CTRL_SHIFT, X, exec, GEOM=$(slurp); canberra-gtk-play -i camera-shutter & grim -g "$GEOM" - | gradia
bind = CTRL_SHIFT, 1, exec, canberra-gtk-play -i camera-shutter & grim - | gradia
bind = CTRL_SHIFT, 2, exec, canberra-gtk-play -i camera-shutter & grim -g "$(slurp)" - | gradia
bind = SUPER_SHIFT, X, exec, GEOM=$(slurp); canberra-gtk-play -i camera-shutter & grim -g "$GEOM" - | satty -f -
bind = SUPER_SHIFT, 1, exec, canberra-gtk-play -i camera-shutter & grim - | satty -f -
bind = SUPER_SHIFT, 2, exec, canberra-gtk-play -i camera-shutter & grim -g "$(slurp)" - | satty -f -

bind = SUPER_SHIFT, 3, exec, dms notify "Start crop recording" && wf-recorder --audio -g "$(slurp)" -f ~/Videos/crop_$(date +%H%M%S).mp4
bind = SUPER_SHIFT, 4, exec, dms notify "Start full recording" && wf-recorder --audio -f ~/Videos/full_$(date +%H%M%S).mp4
bind = SUPER_SHIFT, S, exec, killall -s SIGINT wf-recorder && dms notify "Stop recording" && sleep 0.5 && nautilus ~/Videos

bind = SUPER_SHIFT_ALT, C, exec, vicinae "vicinae://extensions/vicinae/clipboard/history"
bind = SUPER, Space, exec, vicinae "vicinae://extensions/vicinae/clipboard/history"
bind = SUPER_SHIFT, E, exec, vicinae "vicinae://extensions/vicinae/core/search-emojis"
bind = SUPER_SHIFT_ALT, G, exec, vicinae "vicinae://extensions/vicinae/kill-process/index"
bind = SUPER_SHIFT_ALT, B, exec, vicinae "vicinae://extensions/lardissone/raindrop-io/search"
bind = ALT, Tab, exec, vicinae "vicinae://extensions/vicinae/wm/switch-windows"

bind = SUPER_SHIFT, G, exec, grim -g "$(slurp)" - | tesseract - - -l rus+eng | wl-copy

bind = CTRL_SHIFT, Backslash, exec, hyprvoice toggle
bind = CTRL, Backslash, exec, pkill -USR2 -n handy

bind = ALT_SHIFT, Q, exit,
bind = CTRL_ALT, Delete, exit,
