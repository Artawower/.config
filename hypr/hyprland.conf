monitor = eDP-1, preferred, auto, 2

# ── Input ────────────────────────────────────────────────────────
input {
    kb_layout = us,ru
    kb_options = grp:caps_toggle
    numlock_by_default = true
    follow_mouse = 1
    sensitivity = 0.0

    touchpad {
        disable_while_typing = true
        tap-to-click = true
        clickfinger_behavior = true
        drag_lock = true
        tap-and-drag = true
    }

}

# ── General ──────────────────────────────────────────────────────
general {
    border_size = 2
    gaps_in = 8
    gaps_out = 16
    col.active_border = rgba(7b57ffee)
    col.inactive_border = rgba(2e2a3aaa)
    layout = dwindle
    resize_on_border = true
}

# ── Decoration ───────────────────────────────────────────────────
decoration {
    rounding = 8
    active_opacity = 0.8
    inactive_opacity = 0.6

    blur {
        enabled = true
        size = 6
        passes = 2
        new_optimizations = true
    }

    shadow {
        enabled = true
        range = 30
        render_power = 3
        color = rgba(00000070)
        offset = 0 5
    }
}

# ── Animations ───────────────────────────────────────────────────
animations {
    enabled = true

    bezier = ease, 0.25, 0.1, 0.25, 1.0
    bezier = overshot, 0.05, 0.9, 0.1, 1.1

    animation = windows, 1, 2, overshot, slide
    animation = windowsOut, 1, 2, ease, slide
    animation = fade, 1, 2, ease
    animation = workspaces, 1, 2, ease, slide
    animation = border, 1, 2, ease
}

# ── Layouts ──────────────────────────────────────────────────────
dwindle {
    pseudotile = true
    preserve_split = true
    force_split = 2
}

master {
    new_status = master
}

# ── Misc ─────────────────────────────────────────────────────────
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    animate_manual_resizes = true
}

cursor {
    hide_on_key_press = true
}

# debug {
#     disable_logs = false
# }

# ── Named Workspaces (from yabai) ────────────────────────────────
workspace = 1, monitor:eDP-1, default:true, persistent:true
workspace = name:social, monitor:eDP-1, persistent:true
workspace = name:term, monitor:eDP-1, persistent:true
workspace = name:dev, monitor:eDP-1, persistent:true
workspace = name:other, monitor:eDP-1, persistent:true
workspace = name:www, monitor:eDP-1, persistent:true
workspace = name:entertainment, monitor:eDP-1, persistent:true
workspace = name:thrash, monitor:eDP-1, persistent:true
workspace = name:study, monitor:eDP-1, persistent:true
workspace = name:t3, monitor:eDP-1, persistent:true
workspace = name:load, monitor:eDP-1, persistent:true

# ── Autostart ────────────────────────────────────────────────────
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=Hyprland
exec-once = darkman run
exec-once = ydotoold
exec-once = vicinae server
exec-once = pkill xremap; xremap --watch ~/.config/xremap/config.yml
exec-once = sleep 1 && /usr/bin/quickshell -c noctalia-shell
exec-once = sleep 1 && hyprvoice serve
exec-once = $HOME/.config/bin/wallpaper-rotate
exec-once = wl-clip-persist --clipboard regular
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store

# ── Window Rules (v2 syntax for v0.51) ───────────────────────────
# Social apps -> workspace social
windowrulev2 = workspace name:social silent, class:^(telegram-desktop)$
windowrulev2 = workspace name:social silent, class:^(mattermost)$
windowrulev2 = workspace name:social silent, class:^(discord)$

# Browser -> workspace www
windowrulev2 = workspace name:www silent, class:^(zen-browser)$
windowrulev2 = workspace name:www silent, class:^(app.zen_browser.zen)$

# Firefox PiP -> float + pin
windowrulev2 = float, class:^(firefox)$, title:^(Picture-in-Picture)$
windowrulev2 = pin, class:^(firefox)$, title:^(Picture-in-Picture)$

# Opacity handled by decoration section (active_opacity / inactive_opacity)

# Wezterm tile
windowrulev2 = tile, class:^(org\.wezfurlong\.wezterm)$

# ── Keybindings ──────────────────────────────────────────────────
# Modifier: ALT (matching niri config)

# ── Launch ───────────────────────────────────────────────────────
bind = ALT, Return, exec, flatpak run org.wezfurlong.wezterm
bind = CTRL, Return, exec, ghostty
bind = ALT, Space, exec, vicinae open
bind = SUPER_ALT, L, exec, swaylock

# ── Window Management ────────────────────────────────────────────
bind = ALT, Q, killactive,
bind = ALT, F, fullscreen, 1
bind = ALT_SHIFT, F, fullscreen, 0
bind = ALT_SHIFT, C, togglefloating,
bind = ALT, C, centerwindow,

# ── Focus (vim-style, wraps to prev/next workspace at edge) ──────
bind = ALT, H, exec, ~/.config/bin/hypr-focus-or-workspace l
bind = ALT, L, exec, ~/.config/bin/hypr-focus-or-workspace r
bind = ALT, J, movefocus, d
bind = ALT, K, movefocus, u

# ── Move Windows (vim-style, wraps to prev/next workspace at edge)
bind = ALT_SHIFT, H, exec, ~/.config/bin/hypr-move-or-workspace l
bind = ALT_SHIFT, L, exec, ~/.config/bin/hypr-move-or-workspace r
bind = ALT_SHIFT, J, movewindow, d
bind = ALT_SHIFT, K, movewindow, u

# ── Move Windows (arrow keys) ───────────────────────────────────
bind = ALT_SHIFT, Left, movewindow, l
bind = ALT_SHIFT, Right, movewindow, r
bind = ALT_SHIFT, Down, movewindow, d
bind = ALT_SHIFT, Up, movewindow, u

# ── Resize ───────────────────────────────────────────────────────
binde = ALT, Minus, resizeactive, -10% 0
binde = ALT, Equal, resizeactive, 10% 0
binde = ALT_SHIFT, Minus, resizeactive, 0 -10%
binde = ALT_SHIFT, Equal, resizeactive, 0 10%

# ── Workspace Navigation (number keys) ──────────────────────────
# 1=social  2=term  3=dev  4=other  5=www
# 6=entertainment  7=thrash  8=study  9=t3  10=load
bind = ALT, 1, workspace, name:social
bind = ALT, 2, workspace, name:term
bind = ALT, 3, workspace, name:dev
bind = ALT, 4, workspace, name:other
bind = ALT, 5, workspace, name:www
bind = ALT, 6, workspace, name:entertainment
bind = ALT, 7, workspace, name:thrash
bind = ALT, 8, workspace, name:study
bind = ALT, 9, workspace, name:t3
bind = ALT, 0, workspace, name:load

# ── Workspace Navigation (letter shortcuts, matching skhd) ───────
bind = ALT, S, workspace, name:social
bind = ALT, D, workspace, name:dev
bind = ALT, W, workspace, name:www
bind = ALT, I, workspace, name:thrash
bind = ALT, T, workspace, name:term
bind = ALT, E, workspace, name:entertainment
bind = ALT, O, workspace, name:other

# ── Move Window to Workspace (number keys) ──────────────────────
bind = ALT_SHIFT, 1, movetoworkspace, name:social
bind = ALT_SHIFT, 2, movetoworkspace, name:term
bind = ALT_SHIFT, 3, movetoworkspace, name:dev
bind = ALT_SHIFT, 4, movetoworkspace, name:other
bind = ALT_SHIFT, 5, movetoworkspace, name:www
bind = ALT_SHIFT, 6, movetoworkspace, name:entertainment
bind = ALT_SHIFT, 7, movetoworkspace, name:thrash
bind = ALT_SHIFT, 8, movetoworkspace, name:study
bind = ALT_SHIFT, 9, movetoworkspace, name:t3
bind = ALT_SHIFT, 0, movetoworkspace, name:load

# ── Move Window to Workspace (letter shortcuts, matching skhd) ───
bind = ALT_SHIFT, S, movetoworkspace, name:social
bind = ALT_SHIFT, W, movetoworkspace, name:www
bind = ALT_SHIFT, D, movetoworkspace, name:dev
bind = ALT_SHIFT, I, movetoworkspace, name:thrash
bind = ALT_SHIFT, T, movetoworkspace, name:term
bind = ALT_SHIFT, E, movetoworkspace, name:entertainment
bind = ALT_SHIFT, O, movetoworkspace, name:other

# ── Move Window to Workspace (silent - Ctrl+Alt) ────────────────
bind = ALT_CTRL, 1, movetoworkspacesilent, name:social
bind = ALT_CTRL, 2, movetoworkspacesilent, name:term
bind = ALT_CTRL, 3, movetoworkspacesilent, name:dev
bind = ALT_CTRL, 4, movetoworkspacesilent, name:other
bind = ALT_CTRL, 5, movetoworkspacesilent, name:www

# ── Workspace Scroll (mouse) ────────────────────────────────────
bind = ALT, mouse_down, workspace, e-1
bind = ALT, mouse_up, workspace, e+1

# ── Mouse Bindings ──────────────────────────────────────────────
bindm = ALT, mouse:272, movewindow
bindm = ALT, mouse:273, resizewindow

# ── Media Keys ───────────────────────────────────────────────────
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1+ -l 1.0
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1-
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioStop, exec, playerctl stop
bindl = , XF86AudioPrev, exec, playerctl previous
bindl = , XF86AudioNext, exec, playerctl next

# ── Brightness ───────────────────────────────────────────────────
bindel = , XF86MonBrightnessUp, exec, brightnessctl --class=backlight set +10%
bindel = , XF86MonBrightnessDown, exec, brightnessctl --class=backlight set 10%-

# ── Screenshots ──────────────────────────────────────────────────
bind = CTRL_SHIFT, X, exec, GEOM=$(slurp); canberra-gtk-play -i camera-shutter & grim -g "$GEOM" - | gradia
bind = CTRL_SHIFT, 1, exec, canberra-gtk-play -i camera-shutter & grim - | gradia
bind = CTRL_SHIFT, 2, exec, canberra-gtk-play -i camera-shutter & grim -g "$(slurp)" - | gradia
bind = SUPER_SHIFT, X, exec, GEOM=$(slurp); canberra-gtk-play -i camera-shutter & grim -g "$GEOM" - | satty -f -
bind = SUPER_SHIFT, 1, exec, canberra-gtk-play -i camera-shutter & grim - | satty -f -
bind = SUPER_SHIFT, 2, exec, canberra-gtk-play -i camera-shutter & grim -g "$(slurp)" - | satty -f -

# ── Screen Recording ────────────────────────────────────────────
bind = SUPER_SHIFT, 3, exec, dms notify "Start crop recording" && wf-recorder --audio -g "$(slurp)" -f ~/Videos/crop_$(date +%H%M%S).mp4
bind = SUPER_SHIFT, 4, exec, dms notify "Start full recording" && wf-recorder --audio -f ~/Videos/full_$(date +%H%M%S).mp4
bind = SUPER_SHIFT, S, exec, killall -s SIGINT wf-recorder && dms notify "Stop recording" && sleep 0.5 && nautilus ~/Videos

# ── Vicinae Extensions ──────────────────────────────────────────
bind = SUPER_SHIFT_ALT, C, exec, vicinae "vicinae://extensions/vicinae/clipboard/history"
bind = SUPER, Space, exec, vicinae "vicinae://extensions/vicinae/clipboard/history"
bind = SUPER_SHIFT, E, exec, vicinae "vicinae://extensions/vicinae/core/search-emojis"
bind = SUPER_SHIFT_ALT, G, exec, vicinae "vicinae://extensions/vicinae/kill-process/index"
bind = SUPER_SHIFT_ALT, B, exec, vicinae "vicinae://extensions/lardissone/raindrop-io/search"
bind = ALT, Tab, exec, vicinae "vicinae://extensions/vicinae/wm/switch-windows"

# ── OCR (Tesseract) ─────────────────────────────────────────────
bind = SUPER_SHIFT, G, exec, grim -g "$(slurp)" - | tesseract - - -l rus+eng | wl-copy

# ── Voice Control ────────────────────────────────────────────────
bind = CTRL, Backslash, exec, hyprvoice toggle
bind = CTRL_SHIFT, Backslash, exec, pkill -USR2 -n handy

# ── Session ──────────────────────────────────────────────────────
bind = ALT_SHIFT, Q, exit,
bind = CTRL_ALT, Delete, exit,
